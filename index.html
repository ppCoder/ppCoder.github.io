<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Yun">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Yun">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Yun">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>Yun</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Yun</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Code and Love.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/22/è¿ç»´å¼€å‘æ–‡æ¡£/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="PPCoder">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/author.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/22/è¿ç»´å¼€å‘æ–‡æ¡£/" itemprop="url">sshå®‰å…¨ä¸­çš„ä¸€äº›è¦ç‚¹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-22T22:54:27+08:00">
                2019-09-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##SSHè¿œç¨‹ç™»å½•</p>
<p>ssh -p 22 <a href="mailto:root@111.111.111.111" target="_blank" rel="noopener">root@111.111.111.111</a></p>
<p>=== èœå¿—æ°å¤§æ²™ğŸ¦… ===</p>
<h2 id="æœåŠ¡å™¨å®‰å…¨"><a href="#æœåŠ¡å™¨å®‰å…¨" class="headerlink" title="æœåŠ¡å™¨å®‰å…¨"></a>æœåŠ¡å™¨å®‰å…¨</h2><p>ç™½åå•ï¼š/etc/hosts.allow</p>
<p>é»‘åå•ï¼š/etc/hosts.deny</p>
<p>Sshd:xxx.xxx.xxx.xxx:deny</p>
<p>å¤šæ¬¡ç™»å½•å¤±è´¥åŠ å…¥é»‘åå•è„šæœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#è„šæœ¬æ¥æºï¼šhttps://www.cnblogs.com/panblack/p/secure_ssh_auto_block.html</span><br><span class="line"></span><br><span class="line">#è„šæœ¬åœ°å€ï¼š/usr/local/bin/secure_ssh.sh</span><br><span class="line">#! /bin/bash</span><br><span class="line">cat /var/log/secure|awk &apos;/Failed/&#123;print $(NF-3)&#125;&apos;|sort|uniq -c|awk &apos;&#123;print $2&quot;=&quot;$1;&#125;&apos; &gt; /usr/local/bin/black.list</span><br><span class="line">for i in `cat  /usr/local/bin/black.list`</span><br><span class="line">do</span><br><span class="line">  IP=`echo $i |awk -F= &apos;&#123;print $1&#125;&apos;`</span><br><span class="line">  NUM=`echo $i|awk -F= &apos;&#123;print $2&#125;&apos;`</span><br><span class="line">  if [ $&#123;#NUM&#125; -gt 1 ]; then</span><br><span class="line">    grep $IP /etc/hosts.deny &gt; /dev/null</span><br><span class="line">    if [ $? -gt 0 ];then</span><br><span class="line">      echo &quot;sshd:$IP:deny&quot; &gt;&gt; /etc/hosts.deny</span><br><span class="line">    fi</span><br><span class="line">  fi</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">#å®šæ—¶æ‰§è¡Œ</span><br><span class="line"># crontab -e</span><br><span class="line">*/1 * * * *  sh /usr/local/bin/secure_ssh.sh</span><br></pre></td></tr></table></figure>

<p>####sshd_config é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#####ssh serveræ•´ä½“è®¾å®š#####</span><br><span class="line">#ç«¯å£</span><br><span class="line">Port 1007</span><br><span class="line">#å®‰å…¨åè®®</span><br><span class="line">#protocol 1å­˜åœ¨æ¼æ´ï¼Œä½¿ç”¨æ—¶å»ºè®®æ”¹ä¸º2ï¼Œå®¢æˆ·ç«¯openssh7.4ä»¥ä¸Šä¸å†æ”¯æŒv1</span><br><span class="line">Protocol 1,2</span><br><span class="line"></span><br><span class="line">#####å®‰å…¨è®¤è¯#####</span><br><span class="line">#ç”¨æˆ·ç™»å½•å¤±è´¥ï¼Œåœ¨åˆ‡æ–­è¿æ¥å‰æœåŠ¡å™¨éœ€è¦ç­‰å¾…çš„æ—¶é—´</span><br><span class="line">LoginGraceTime 2m</span><br><span class="line"></span><br><span class="line">#####ç™»å½•åè®¾ç½®#####</span><br><span class="line">#æ‰“å°ä¸Šä¸€æ¬¡ç™»å½•ä¿¡æ¯</span><br><span class="line">PrintLastLog yes</span><br><span class="line">#æœ€å¤§å¤±è´¥æ¬¡æ•°</span><br><span class="line">#å½“å¤±è´¥æ¬¡æ•°å¤ªå¤šæ—¶ï¼Œä¿®æ”¹ç™½åå•å³å¯</span><br><span class="line">MaxAuthTries 2</span><br><span class="line">#sshæœ€å¤§è¿æ¥ä¸ªæ•°</span><br><span class="line">MAxStartups 5</span><br></pre></td></tr></table></figure>

<p>service sshd reload â€“&gt; ç”Ÿæ•ˆ</p>
<p>##é˜²ç«å¢™firewall</p>
<p>å¯åŠ¨ï¼šsystemctl start firewallæˆ–systemctl start firewalld.service</p>
<p>å¼€æœºè‡ªå¯ï¼šsystemctl enable firewall</p>
<p>æ·»åŠ ç«¯å£ï¼šfirewall-cmd â€“zone=public â€“add-port=443/tcp â€“permanent</p>
<p>æŸ¥çœ‹ç«¯å£ï¼šfirewall-cmd â€“permanent â€“list-port</p>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶åé‡æ–°åŠ è½½é…ç½®ï¼šfirewall-cmd â€“reload</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/06/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="PPCoder">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/author.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/06/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-06T19:46:41+08:00">
                2019-09-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Welcome"><a href="#Welcome" class="headerlink" title="Welcome!"></a>Welcome!</h3><p>The website is stored some my markdown, and sometimes i might refer otherâ€™s words directly. so i need transfer my note to original works.</p>
<p>Then again, if there is infring, please contact me wo delete.</p>
<p>Email: <a href="mailto:dml_pig@163.com" target="_blank" rel="noopener">dml_pig@163.com</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/17/JVM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="PPCoder">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/author.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/17/JVM/" itemprop="url">JVMè¯»ä¹¦ç¬”è®°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-17T19:38:10+08:00">
                2019-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h1><hr>
<p><img src="C:%5CUsers%5CHP%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1560514540657.png" alt="1560514540657"></p>
<h2 id="javaè¿è¡Œæ—¶æ•°æ®åŒº"><a href="#javaè¿è¡Œæ—¶æ•°æ®åŒº" class="headerlink" title="javaè¿è¡Œæ—¶æ•°æ®åŒº"></a>javaè¿è¡Œæ—¶æ•°æ®åŒº</h2><p>javaè™šæ‹Ÿæœºåœ¨æ‰§è¡Œjavaç¨‹åºçš„è¿‡ç¨‹ä¸­ä¼šæŠŠå®ƒæ‰€ç®¡ç†çš„å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªä¸åŒçš„æ•°æ®åŒºåŸŸã€‚</p>
<p>æ–¹æ³•åŒº</p>
<p>å †</p>
<p>è¿è¡Œæ—¶å¸¸é‡æ± </p>
<p>ç¨‹åºè®¡æ•°å™¨ï¼šnative method is undefined</p>
<p>æœ¬åœ°æ–¹æ³•æ ˆï¼šnative</p>
<p>è™šæ‹Ÿæœºæ ˆï¼šthreadâ€“&gt;VM stack, methodâ€“&gt;frame</p>
<hr>
<h2 id="javaå†…å­˜æ¨¡å‹"><a href="#javaå†…å­˜æ¨¡å‹" class="headerlink" title="javaå†…å­˜æ¨¡å‹"></a>javaå†…å­˜æ¨¡å‹</h2><p>ä¸»è¦ç›®æ ‡æ˜¯å®šä¹‰ç¨‹åºä¸­å„ä¸ªå˜é‡çš„è®¿é—®è§„åˆ™ï¼Œå³åœ¨è™šæ‹Ÿæœºä¸­å°†å˜é‡å­˜å‚¨åˆ°å†…å­˜å’Œä»å†…å­˜ä¸­å»é™¤å˜é‡è¿™æ ·çš„åº•å±‚ç»†èŠ‚ã€‚</p>
<p>æ–¹æ³•åŒºï¼šï¼ˆéå †ï¼Œnon-heapï¼Œmetaspaceï¼ˆ1.8å…ƒæ•°æ®åŒºï¼‰ï¼Œperm spaceï¼ˆ1.7æ°¸ä¹…ä»£ï¼‰ï¼‰</p>
<p>å †ï¼šOldè€å¹´ä»£ï¼ŒYoungæ–°ç”Ÿä»£ï¼ˆeden[8]ï¼Œsurvivor[2]ï¼ˆfrom[1]ï¼Œto[1]ï¼‰ï¼‰</p>
<p>java vm è§†å›¾ç›‘è§†å™¨ï¼šjvisualvm</p>
<p>gc{</p>
<p>}</p>
<p>åƒåœ¾æ”¶é›†å™¨ï¼šï¼ˆå¥½åè¯„åˆ¤æ ‡å‡†ï¼šååé‡å’Œåœé¡¿æ—¶é—´ï¼‰</p>
<ul>
<li>Serial å•çº¿ç¨‹æ”¶é›†å™¨ï¼Œæ”¶é›†æ—¶æš‚åœå…¶ä»–çº¿ç¨‹</li>
<li>Serial Old â†‘ æ ‡è®°-æ•´ç†</li>
<li>ParNew å¤šçº¿ç¨‹gc æ”¶é›†æ—¶æš‚åœå…¶ä»–çº¿ç¨‹</li>
<li>Parallel Scanvenge å¤šçº¿ç¨‹å¹¶è¡Œgc ä¿è¯<strong>ååé‡ä¼˜å…ˆ</strong></li>
<li>Parallel Oldâ†‘</li>
<li>CMSï¼šconcurrent Mark Sweep æ›´åŠ å…³æ³¨å›æ”¶<strong>åœé¡¿æ—¶é—´</strong> æ ‡è®°-æ¸…é™¤ åˆå§‹æ ‡è®°â€“å¹¶å‘æ ‡è®°â€“é‡æ–°æ ‡è®°â€“å¹¶å‘æ¸…ç†</li>
<li>G1 åˆ†ä»£æ”¶é›†ï¼ˆå­˜åœ¨äºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼‰ç©ºé—´æ•´ç†ï¼ˆæ ‡è®°-æ•´ç†ï¼‰ åœé¡¿æ—¶é—´å¯è®¾å®š</li>
</ul>
<p>1.å…³äºjavaè™šæ‹Ÿæœºæ ˆ</p>
<p>threadâ€“&gt;VM stack, methodâ€“&gt;frame</p>
<p>ç”±æ­¤å¯è§ï¼Œä¸€ä¸ªçº¿ç¨‹å¯¹åº”ç€ä¸€ä¸ªè™šæ‹Ÿæœºæ ˆï¼Œä¸€ä¸ªæ–¹æ³•å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§ï¼Œç”±äºæ ˆæ˜¯åè¿›å…ˆå‡ºï¼Œæ­£å¯¹åº”æ–¹æ³•çš„è°ƒç”¨è§„åˆ™ï¼Œåè°ƒç”¨çš„å…ˆè¿”å›ã€‚æ–¹æ³•å†…éƒ¨çš„å±€éƒ¨å˜é‡ç­‰åˆ™è‡ªç„¶ä¿å­˜åœ¨æ¯ä¸ªæ ˆå¸§ä¸­ã€‚</p>
<p>å…³äºpcå¯„å­˜å™¨</p>
<p>pcå¯„å­˜å™¨æ˜¯javaè°ƒè¯•ç­‰ç¨‹åºä¸­æ–­æ“ä½œï¼Œä»£ç æŒ‡ä»¤è¿è¡Œçš„è¡Œæ•°ï¼Œæ¢å¤æ—¶å»è¿™é‡ŒæŸ¥æ‰¾ã€‚é‡è¦çš„ä¸€ç‚¹å°±æ˜¯ï¼Œnativeæ–¹æ³•æ˜¯undefined</p>
<p>2.è¿è¡Œæ—¶æ•°æ®åŒºæ˜¯javaç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å„ç§å˜é‡æ–¹æ³•å­˜å‚¨çš„é€»è¾‘åŒºåŸŸï¼Œä¾¿äºç®¡ç†ã€‚</p>
<p>å†…å­˜ç»“æ„æ¨¡å‹åˆ™æ˜¯å®ç°è¿™äº›é€»è¾‘åŒºåŸŸçš„åº•å±‚å®ç°</p>
<p>3.å†…å­˜æ¨¡å‹çš„åˆ’åˆ†</p>
<p>æ–¹æ³•åŒºï¼šï¼ˆéå †ï¼Œnon-heapï¼Œmetaspaceï¼ˆ1.8å…ƒæ•°æ®åŒºï¼‰ï¼Œperm spaceï¼ˆ1.7æ°¸ä¹…ä»£ï¼‰ï¼‰</p>
<p>å †ï¼šOldè€å¹´ä»£ï¼ŒYoungæ–°ç”Ÿä»£ï¼ˆeden[8]ï¼Œsurvivor[2]ï¼ˆfrom[1]ï¼Œto[1]ï¼‰ï¼‰</p>
<p>4.ç¡®å®šå¯¹è±¡ä¸ºåƒåœ¾çš„ç®—æ³•ï¼šå¼•ç”¨-æ ‡è®°ï¼Œå¯è¾¾æ€§åˆ†æ</p>
<p>5.å¸¸ç”¨çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼šæ ‡è®°-æ¸…é™¤ï¼Œæ ‡è®°-å¤åˆ¶ï¼Œæ ‡è®°-æ•´ç†</p>
<p>6.åƒåœ¾æ”¶é›†å™¨ï¼šï¼ˆ<strong>å¥½åè¯„åˆ¤æ ‡å‡†ï¼šååé‡å’Œåœé¡¿æ—¶é—´</strong>ï¼‰</p>
<ul>
<li>Serial å¤åˆ¶ å•çº¿ç¨‹æ”¶é›†å™¨ï¼Œæ”¶é›†æ—¶æš‚åœå…¶ä»–çº¿ç¨‹</li>
<li>Serial Old â†‘ æ ‡è®°-æ•´ç†</li>
<li>ParNew å¤åˆ¶ å¤šçº¿ç¨‹gc æ”¶é›†æ—¶æš‚åœå…¶ä»–çº¿ç¨‹</li>
<li>Parallel Scanvenge å¤åˆ¶ å¤šçº¿ç¨‹å¹¶è¡Œgc ä¿è¯<strong>ååé‡ä¼˜å…ˆ</strong></li>
<li>Parallel Oldâ†‘ æ ‡è®°-æ•´ç†</li>
<li>CMSï¼šï¼ˆconcurrent Mark Sweepï¼‰æ ‡è®°-æ¸…é™¤  æ›´åŠ å…³æ³¨å›æ”¶<strong>åœé¡¿æ—¶é—´</strong></li>
<li>G1 åˆ†ä»£æ”¶é›†ï¼ˆå­˜åœ¨äºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼‰ç©ºé—´æ•´ç†ï¼ˆæ ‡è®°-æ•´ç†ï¼‰ åœé¡¿æ—¶é—´å¯è®¾å®š</li>
</ul>
<p>7.ååé‡ï¼šå½“å‰æ—¶åˆ»ä¸‹ï¼Œäº§ç”Ÿä¸€å®šé‡çš„è¿ç®—æˆ–è€…æ“ä½œï¼Œä¹Ÿå°±æ˜¯é€Ÿç‡ã€‚æ”¶é›†å™¨ä¸­å°±æ˜¯è¯´åœ¨å¤§é‡çš„æ“ä½œï¼Œå¾ˆçŸ­çš„æ—¶é—´å†…å°†åƒåœ¾æ”¶é›†å®Œæˆã€‚</p>
<p>åœé¡¿æ—¶é—´ï¼šå½“å‰ä½œä¸šæ“ä½œè¢«å…¶ä»–æ“ä½œæ‰“æ–­ï¼Œåˆ°æ¢å¤å‰çš„ä¸€æ®µæ—¶é—´å°±æ˜¯åœé¡¿æ—¶é—´ã€‚å³è¿›è¡Œå›æ”¶æ“ä½œæ—¶ï¼Œå ç”¨äº†å…¶ä»–æ“ä½œçš„æ—¶é—´ï¼Œå¯¹äºå…¶ä»–æ“ä½œæ¥è¯´ï¼Œå³äº§ç”Ÿäº†åœé¡¿æ—¶é—´</p>
<h2 id="å¯¹è±¡å·²æ­»å—ï¼Ÿå¯è¾¾æ€§åˆ†æ"><a href="#å¯¹è±¡å·²æ­»å—ï¼Ÿå¯è¾¾æ€§åˆ†æ" class="headerlink" title="å¯¹è±¡å·²æ­»å—ï¼Ÿå¯è¾¾æ€§åˆ†æ"></a>å¯¹è±¡å·²æ­»å—ï¼Ÿå¯è¾¾æ€§åˆ†æ</h2><p><strong>ä¸‰ç§ç±»å‹çš„å¼•ç”¨å®šä¹‰äº†ä¸‰ç§ä¸åŒå±‚æ¬¡çš„å¯è¾¾æ€§çº§åˆ«ï¼Œç”±å¼ºåˆ°å¼±æ’åˆ—å¦‚ä¸‹ï¼š</strong></p>
<p>ã€€ã€€<strong>SoftReference &gt;</strong> <strong>WeakReference &gt; PhantomReference</strong></p>
<p>ã€€ã€€è¶Šå¼±è¡¨ç¤ºå¯¹åƒåœ¾å›æ”¶å™¨çš„é™åˆ¶è¶Šå°‘ï¼Œå¯¹è±¡è¶Šå®¹æ˜“è¢«å›æ”¶ã€‚</p>
<h3 id="SoftReference"><a href="#SoftReference" class="headerlink" title="SoftReference"></a>SoftReference</h3><p>ã€€ã€€<strong>SoftReference</strong>ç”¨æ¥å®ç°ä¸€äº›å†…å­˜æ•æ„Ÿçš„ç¼“å­˜(Soft references are for implementing memory-sensitive caches)ï¼Œåªè¦å†…å­˜ç©ºé—´è¶³å¤Ÿï¼Œå¯¹è±¡å°±ä¼šä¿æŒä¸è¢«å›æ”¶ã€‚</p>
<p>ã€€ã€€åä¹‹ï¼Œå½“å®¿ä¸»è¿›ç¨‹çš„å†…å­˜ç©ºé—´ä¸è¶³æ—¶ï¼Œå¯¹è±¡å°±ä¼šè¢«GCå›æ”¶ã€‚</p>
<p>ã€€ã€€æ‰€ä»¥SoftReferenceæ„å‘³ç€ï¼š<strong>hold on until you canâ€™t.</strong></p>
<h3 id="WeakReference"><a href="#WeakReference" class="headerlink" title="WeakReference"></a>WeakReference</h3><p>ã€€ã€€<strong>W**</strong>eakReference<strong>å¯ä»¥ç”¨æ¥å®ç°ä¸€äº›è§„èŒƒåŒ–æ˜ å°„ï¼ˆ</strong>WeakHashMap**ï¼‰ï¼Œå…¶ä¸­keyæˆ–è€…valueå½“å®ƒä»¬ä¸å†è¢«å¼•ç”¨æ—¶å¯ä»¥è‡ªåŠ¨è¢«å›æ”¶ã€‚</p>
<p>ã€€ã€€å½“ä½ æƒ³å¼•ç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸ªå¯¹è±¡æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½ ä¸æƒ³ä»‹å…¥è¿™ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™æ—¶å€™ä½ å°±æ˜¯ç”¨å¼±å¼•ç”¨ã€‚</p>
<p>ã€€ã€€è¿™ä¸ªå¼•ç”¨ä¸ä¼šåœ¨å¯¹è±¡çš„åƒåœ¾å›æ”¶åˆ¤æ–­ä¸­äº§ç”Ÿä»»ä½•é™„åŠ çš„å½±å“ã€‚</p>
<h3 id="PlantomReference"><a href="#PlantomReference" class="headerlink" title="PlantomReference"></a>PlantomReference</h3><p>ã€€ã€€<strong>PlantomReference</strong>å’ŒWeakReferenceä¸€æ ·ï¼Œä¹Ÿä¸ä¼šä»‹å…¥å¼•ç”¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>ã€€ã€€PhantomReferenceç”¨æ¥è°ƒåº¦ä¸€äº›é¢„éªŒæ¸…ç†åŠ¨ä½œï¼Œæä¾›æ¯”Javaæ¸…ç†æœºåˆ¶æ›´çµæ´»çš„å¤„ç†æ–¹å¼ã€‚ï¼ˆPhantom references are for scheduling pre-mortem cleanup actions in a more flexible way than is possible with the Java finalization mechanism.ï¼‰</p>
<p>ã€€ã€€PlantomReferenceæ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒçš„getæ–¹æ³•æ€»æ˜¯è¿”å›nullï¼Œæ‰€ä»¥ä½ å¾—ä¸åˆ°å®ƒå¼•ç”¨çš„å¯¹è±¡ã€‚</p>
<p>ã€€ã€€å®ƒä¿å­˜<strong>ReferenceQueue</strong>ä¸­çš„è½¨è¿¹ã€‚</p>
<p>ã€€ã€€å®ƒå…è®¸ä½ çŸ¥é“å¯¹è±¡ä½•æ—¶ä»å†…å­˜ä¸­ç§»é™¤ã€‚</p>
<h2 id="è™šæ‹ŸæœºæŒ‡ä»¤"><a href="#è™šæ‹ŸæœºæŒ‡ä»¤" class="headerlink" title="è™šæ‹ŸæœºæŒ‡ä»¤"></a>è™šæ‹ŸæœºæŒ‡ä»¤</h2><h4 id="ä¿®æ”¹gcæ”¶é›†å™¨"><a href="#ä¿®æ”¹gcæ”¶é›†å™¨" class="headerlink" title="ä¿®æ”¹gcæ”¶é›†å™¨"></a>ä¿®æ”¹gcæ”¶é›†å™¨</h4><p>tomcatçš„catalina.shé…ç½®æ–‡ä»¶ JAVA_OPTS</p>
<p>jinfo -flags å‚æ•° pid//å®æ—¶ä¿®æ”¹</p>
<p>Java -XXï¼šå‚æ•° -jar xxx.jar //å¯åŠ¨æ—¶è®¾ç½®</p>
<h4 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><p>jps -l //æŸ¥çœ‹javaè¿›ç¨‹</p>
<p>jstat -class pid 1000ï¼ˆæ—¶é—´ï¼‰ 10ï¼ˆæ¬¡æ•°ï¼‰//æŸ¥çœ‹ç±»çš„ä¿¡æ¯</p>
<p>jstat -gc </p>
<p>jstack pid</p>
<p>jmap -heap pid</p>
<p>jmap </p>
<p>HeapDumpOnOutOfMemoryError //å †å†…å­˜æº¢å‡ºæ—¶dump</p>
<h4 id="åƒåœ¾å›æ”¶"><a href="#åƒåœ¾å›æ”¶" class="headerlink" title="åƒåœ¾å›æ”¶"></a>åƒåœ¾å›æ”¶</h4><p>-XXï¼š+UsePrintGCDetails</p>
<p>-XXï¼š+UsePrintGCTimeStamps</p>
<h3 id="ç±»çš„åŠ è½½"><a href="#ç±»çš„åŠ è½½" class="headerlink" title="ç±»çš„åŠ è½½"></a>ç±»çš„åŠ è½½</h3><ul>
<li>åˆ›å»ºç±»çš„å®ä¾‹</li>
<li>æ‹¿åˆ°ç±»çš„é™æ€å˜é‡</li>
<li>è°ƒç”¨ç±»çš„é™æ€æ–¹æ³•</li>
<li>åˆå§‹åŒ–å­ç±»</li>
</ul>
<h4 id="gcåˆ†æå·¥å…·"><a href="#gcåˆ†æå·¥å…·" class="headerlink" title="gcåˆ†æå·¥å…·"></a>gcåˆ†æå·¥å…·</h4><p>gceasy.io(åœ¨çº¿)</p>
<p>gcviewer(æœ¬åœ°)</p>
<p>1.JVMå¸¸ç”¨å‚æ•°ï¼š</p>
<p>-XX:+UseParallelGC</p>
<p>-XX:+UseParNewGC</p>
<p>-Xms</p>
<p>-Xmx</p>
<p>-Xmn</p>
<p>-XX:+UsePrintGCDetails</p>
<p>-XX:+UsePrintGCTimeStamps</p>
<p>2.JVMå¸¸ç”¨çš„å‘½ä»¤å’Œå·¥å…·</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">jps -l //æŸ¥çœ‹javaè¿›ç¨‹</span><br><span class="line"></span><br><span class="line">jstat -class pid 1000ï¼ˆæ—¶é—´ï¼‰ 10ï¼ˆæ¬¡æ•°ï¼‰//æŸ¥çœ‹ç±»çš„ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">jstat -gc pid &lt;interval&gt;  &lt;count&gt; //æ‰“å°gcä¿¡æ¯</span><br><span class="line"></span><br><span class="line">jstack pid //æŸ¥çœ‹çº¿ç¨‹è°ƒç”¨å †æ ˆ</span><br><span class="line"></span><br><span class="line">jmap -heap pid //æ‰“å°javaè¿›ç¨‹å †ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">jmap -dump:file=xxx pid //dumpå †åˆ°æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">HeapDumpOnOutOfMemoryError //å †å†…å­˜æº¢å‡ºæ—¶dump</span><br></pre></td></tr></table></figure>

<p>jpsï¼šè™šæ‹Ÿæœºè¿›ç¨‹çŠ¶å†µå·¥å…·</p>
<p>jstatï¼šè™šæ‹Ÿæœºç»Ÿè®¡ä¿¡æ¯ç›‘è§†å·¥å…·</p>
<p>jinfoï¼šjavaé…ç½®ä¿¡æ¯å·¥å…·</p>
<p>jmapï¼šjavaå†…å­˜æ˜ åƒå·¥å…·</p>
<p>jhatï¼šè™šæ‹Ÿæœºå †è½¬å‚¨å¿«ç…§åˆ†æå·¥å…·</p>
<p>jstackï¼šjavaå †æ ˆè·Ÿè¸ªå·¥å…·</p>
<p>jconsoleï¼šjavaç›‘è§†ä¸ç®¡ç†æ§åˆ¶å°</p>
<p>visualVMï¼šå¤šåˆä¸€æ•…éšœå¤„ç†å·¥å…·</p>
<p>3.</p>
<p>æ–¹æ³•åŒºï¼šç±»ä¿¡æ¯ï¼Œå¸¸é‡ï¼Œé™æ€å˜é‡ï¼Œå³æ—¶ç¼–è¯‘åçš„ä»£ç </p>
<p>å †ï¼šå¯¹è±¡å’Œæ•°æ®å®ä¾‹</p>
<p>è¿è¡Œæ—¶å¸¸é‡æ± ï¼šå¸¸é‡</p>
<p>ç¨‹åºè®¡æ•°å™¨ï¼šå­—èŠ‚ç çš„è¡Œå·</p>
<p>æœ¬åœ°æ–¹æ³•æ ˆï¼šnativeæ–¹æ³•</p>
<p>è™šæ‹Ÿæœºæ ˆï¼šå±€éƒ¨å˜é‡è¡¨ï¼Œæ“ä½œæ•°æ ˆï¼ŒåŠ¨æ€é“¾æ¥ï¼Œå‡ºå£</p>
<p>4.</p>
<p>å †ï¼š <code>-Xmx20m -Xms5m -XX:+HeapDumpOnOutOfMemoryError while(1){new Object();}</code></p>
<p>æ–¹æ³•åŒºï¼š<code>-XX:PermSize20M  -XX:MaxPermSize40M while(1){CglibVean bean=new CglibBean();}</code></p>
<p>5.</p>
<p>é€’å½’å¾ªç¯è°ƒç”¨ï¼šStackOverflow</p>
<p>æŸ¥çœ‹æ­»é”ï¼šjstack -l pid</p>
<p>6.</p>
<p>.<br>â”œâ”€ç±»åŠ è½½å™¨<br>â”œâ”€â”€è£…è½½<br>|   â”œâ”€â”€ æ‰¾åˆ°classæ–‡ä»¶å¹¶è½¬æ¢ä¸ºæµçš„å½¢å¼<br>|   â”œâ”€â”€ å­˜å‚¨åˆ°å„ä¸ªåŒºåŸŸ<br>|   â””â”€â”€ åˆ›å»ºClasså¯¹è±¡<br>â”œâ”€â”€é“¾æ¥<br>|   â”œâ”€â”€ éªŒè¯<br>|   â”œâ”€â”€ å‡†å¤‡<br>|   â””â”€â”€ è§£æ<br>â”œâ”€â”€ åˆå§‹åŒ–<br>â”œâ”€åƒåœ¾æ”¶é›†å™¨<br>â”œâ”€â”€ æ–¹æ³•åŒº<br>â””â”€â”€ å †</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/author.jpg" alt="PPCoder">
            
              <p class="site-author-name" itemprop="name">PPCoder</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">PPCoder</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
