<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Yun">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Yun">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Yun">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/">





  <title>Yun</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Yun</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Code and Love.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/24/Java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="PPCoder">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/author.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/24/Java/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-24T22:44:20+08:00">
                2019-09-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h2><h3 id="null"><a href="#null" class="headerlink" title="null"></a><code>null</code></h3><blockquote>
<p>The Java Virtual Machine specification does not mandate a concrete value encoding null.（Java虚拟机规范并没有授权一个具体的值编码null。）</p>
<p>不是有效的对象实例，并没有为它分配内存。它只是一个值，指示对象引用当前不引用对象</p>
</blockquote>
<ol>
<li><p>大小写敏感，</p>
</li>
<li><p>引用类型变量的默认值，</p>
</li>
<li><p>不能赋给基本类型变量，</p>
</li>
<li><p>既不是对象也不是类型，是一种特殊值</p>
</li>
<li><p>可以将null转化或赋予成任何引用类型</p>
</li>
<li><p><code>instanceof</code>对带有null值的引用类型变量会返回<code>false</code></p>
</li>
<li><p><code>null==null是安全的</code></p>
</li>
<li><p>静态方法可以通过类型调用，所以null可以调用静态方法</p>
</li>
<li><p>其他用途和注意事项：</p>
<ul>
<li><p>释放内存</p>
</li>
<li><p><code>List</code>：允许重复元素，可以加入任意多个null</p>
<p><code>Set</code>：不允许重复元素，最多可以加入一个null</p>
<p><code>Map</code>：Map的key最多可以加入一个null，value字段没有限制</p>
</li>
</ul>
</li>
</ol>
<h3 id="default"><a href="#default" class="headerlink" title="default"></a><code>default</code></h3><ul>
<li><p>witch中的默认值</p>
</li>
<li><p>JAVA 8 新特性，在接口中实现方法</p>
</li>
</ul>
<blockquote>
<p>注意：与static有差别，default只是保证实现了方法，用法和普通函数一样</p>
</blockquote>
<h3 id="transient"><a href="#transient" class="headerlink" title="transient"></a><code>transient</code></h3><ul>
<li><p>阻止变量被序列化，即反序列化时被赋空值</p>
</li>
<li><p>可以手动序列化</p>
</li>
</ul>
<h3 id="Native"><a href="#Native" class="headerlink" title="Native"></a><code>Native</code></h3><p>Java Native Interface(Java本地接口)：用户和本地C代码进行互操作的API</p>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h3><ol>
<li><p>“按位与”：&amp;</p>
<p>双目运算符，对两个整型数据a，b按位进行运算，运算结果是一个整形数据c。</p>
<p>运算法则是：如果a，b两个数据对应位都是1，则c的该位是1，否则是0</p>
</li>
<li><p>“按位或”：|</p>
<p>双目运算符，对两个整形数据a，b按位进行运算，运算结果是一个整形数据c。</p>
<p>运算法则：如果a，b两个数据对应位都是0，则c的该位是0，否则是1。</p>
</li>
<li><p>“按位非”：~</p>
<p>弹幕运算符，对一个整型数据a按位进行运算，运算结果是一个整形数据c。</p>
<p>运算法则：如果a对应位是0，则c的对应位是1，否则是0</p>
</li>
<li><p>“按位异或”：^</p>
<p>双目运算符，对两个整形数据a，b按位进行运算，运算结果是一个整形数据c。</p>
<p>运算法则：如果a，b两个数据对应位相同，则c的该位是0，否则是1</p>
</li>
</ol>
<h3 id="移位运算符"><a href="#移位运算符" class="headerlink" title="移位运算符"></a>移位运算符</h3><blockquote>
<p>注意： </p>
<ul>
<li>移位运算符只可用来处理整数类型</li>
<li>如果对char，byte或short类型数值移位，将强制转型为int类型</li>
<li>当短类型byte，short对-1移位时，多次类型转换可能会导致数字不变</li>
<li>右侧整数  = 移动的位数</li>
</ul>
</blockquote>
<ol>
<li><p>左移操作符：&lt;&lt;</p>
<p>低位补0</p>
</li>
<li><p>右移操作符：&gt;&gt;</p>
<p>“符号拓展”：符号为正，则高位补0；符号为负，高位补1</p>
</li>
<li><p>无符号右移操作符：&gt;&gt;&gt;</p>
<p>“零拓展”：高位补0</p>
</li>
</ol>
<blockquote>
<p>难点：（Thinking in java中可能难以理解的部分）</p>
<p>所谓“数值右端低五位才有用”，参考 [<a href="https://blog.csdn.net/Pioneer_Java/article/details/78742267]" target="_blank" rel="noopener">https://blog.csdn.net/Pioneer_Java/article/details/78742267]</a></p>
<p>两个关键词：数值右端，低五位</p>
<ul>
<li>数值右端：值表达式x &gt;&gt; y，数值x，x的右端即y</li>
<li>低五位：y的低五位，2的5次方=32，保证不超过int位数</li>
</ul>
</blockquote>
<h2 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h2><h3 id="int"><a href="#int" class="headerlink" title="int"></a><code>int</code></h3><h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><h3 id="Java对象的内存模型"><a href="#Java对象的内存模型" class="headerlink" title="Java对象的内存模型"></a>Java对象的内存模型</h3><p> | 对象头 | 实例数据 | 对齐填充字节 |</p>
<h4 id="对象头"><a href="#对象头" class="headerlink" title="对象头"></a>对象头</h4><p>| <code>MarkWord</code> | 指向类的指针 | 数组长度（只有数组对象有） |</p>
<h5 id="MarkWord"><a href="#MarkWord" class="headerlink" title="MarkWord"></a><code>MarkWord</code></h5><p>记录了对象和synchronized锁有关的信息</p>
<p><img src="G:%5Cresource%5Cpublic%5CYunBlog%5CNote%5Cpic%5C1565839536881.png" alt="1565839536881"></p>
<h5 id="指向类的指针"><a href="#指向类的指针" class="headerlink" title="指向类的指针"></a>指向类的指针</h5><blockquote>
<p> 该指针在32位JVM中的长度是32bit，在64位JVM中长度是64bit。</p>
<p> Java对象的类数据保存在方法区。</p>
</blockquote>
<h5 id="数组长度"><a href="#数组长度" class="headerlink" title="数组长度"></a>数组长度</h5><blockquote>
<p>只有数组对象保存了这部分数据。</p>
<p>该数据在32位和64位JVM中长度都是32bit</p>
</blockquote>
<h4 id="实例数据"><a href="#实例数据" class="headerlink" title="实例数据"></a>实例数据</h4><blockquote>
<p>对象的实例数据就是在java代码中能看到的属性和他们的值</p>
</blockquote>
<h4 id="对齐填充字节"><a href="#对齐填充字节" class="headerlink" title="对齐填充字节"></a>对齐填充字节</h4><blockquote>
<p>因为JVM要求java的对象占的内存大小应该是8bit的倍数，所以后面有几个字节用于把对象的大小补齐至8bit的倍数，没有特别的功能。</p>
</blockquote>
<h3 id="对象的创建"><a href="#对象的创建" class="headerlink" title="对象的创建"></a>对象的创建</h3><h4 id="类加载检查"><a href="#类加载检查" class="headerlink" title="类加载检查"></a>类加载检查</h4><p>//todo</p>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><h2 id="集合类"><a href="#集合类" class="headerlink" title="集合类"></a>集合类</h2><h3 id="集合框架"><a href="#集合框架" class="headerlink" title="集合框架"></a>集合框架</h3><p><img src="G:%5Cresource%5Cpublic%5CYunBlog%5Cpic%5CJAVA%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6.png" alt="img"></p>
<h3 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a><code>Collection</code></h3><blockquote>
<p>The root interface in the collection hierarchy.  A collection represents a group of objects, known as its elements.  Some collections allow duplicate elements and others do not.  Some are ordered and others unordered.  The JDK does not provide any direct implementations of this interface: it provides implementations of more specific subinterfaces like {@code Set} and {@code List}.  This interface is typically used to pass collections around and manipulate them where maximum generality is desired.</p>
<p>集合层次结构中的根接口。 集合表示一组对象，称为其元素。 有些集合允许重复元素而其他集合则不允许。 有些是订购的，有些是无序的。 JDK不提供此接口的任何直接实现：它提供了更具体的子接口的实现，如Set和List。 此接口通常用于传递集合并在需要最大通用性的情况下对其进行操作。</p>
</blockquote>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a><code>Map</code></h3><blockquote>
<p>An object that maps keys to values.  A map cannot contain duplicate keys; each key can map to at most one value.</p>
<p>将key映射到value的一个对象，map不能包含重复的key，每个key只能映射一个value</p>
</blockquote>
<p>并且，Map和Collection没有关系</p>
<h4 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a><code>HashMap</code></h4><blockquote>
<p>Hash table based implementation of the {@code Map} interface.  This implementation provides all of the optional map operations, and permits {@code null} values and the {@code null} key.  (The {@code HashMap} class is roughly equivalent to {@code Hashtable}, except that it is unsynchronized and permits nulls.)  This class makes no guarantees as to the order of the map; in particular, it does not guarantee that the order will remain constant over time.</p>
<p>基于Map接口实现的HashTable。此实现提供了所有可选的map操作，并允许value为null和key为null。HashMap类大致相当于HashTable，除了它是不同步的并且允许空值。这个类不保证map的顺序，尤其是它不保证顺序会随着时间的推移保持不变</p>
</blockquote>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ol>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 允许且只允许有一个key为null，放在第一位</span></span><br><span class="line"><span class="comment">     * 插入的时间复杂度基本是O(1)</span></span><br><span class="line"><span class="comment">     * key用set存放，通过map的实现函数</span></span><br><span class="line"><span class="comment">     * 元素是无序的</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize()&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 容量*2</span></span><br><span class="line"><span class="comment">     * 扩容会导致元素的顺序不定时改变</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li></li>
</ol>
<h3 id="List"><a href="#List" class="headerlink" title="List"></a><code>List</code></h3><blockquote>
<p>An ordered collection (also known as a sequence).  The user of this interface has precise control over where in the list each element is inserted.  The user can access elements by their integer index (position in the list), and search for elements in the list.</p>
<p>有序集合。该接口的用户可以精确的控制列表中每个元素的插入位置。用户可以通过调整数的索引访问元素，并搜索列表中的元素</p>
</blockquote>
<h4 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a><code>LinkedList</code></h4><blockquote>
<p>Doubly-linked list implementation of the {@code List} and {@code Deque} interfaces.  Implements all optional list operations, and permits all elements (including {@code null}).</p>
<p>实现了List和Deque接口的双链表实现。实现了所有可选的list操作，并允许所有元素，包含null</p>
</blockquote>
<h4 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a><code>ArrayList</code></h4><blockquote>
<p>Resizable-array implementation of the {@code List} interface.  Implements all optional list operations, and permits all elements, including {@code null}.  In addition to implementing the {@code List} interface, this class provides methods to manipulate the size of the array that is used internally to store the list.  (This class is roughly equivalent to {@code Vector}, except that it is unsynchronized.)</p>
<p>实现了List接口的可调整大小的数组实现。实现了所有可选list操作，允许所有元素，包含null。除此之外，它还提供了一些方法来操作内部用于存储列表的数组的大小。（相当于Vector，但它不同步）</p>
</blockquote>
<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a><code>Set</code></h3><blockquote>
<p>A collection that contains no duplicate elements.  More formally, sets contain no pair of elements {@code e1} and {@code e2} such that {@code e1.equals(e2)}, and at most one null element.  As implied by its name, this interface models the mathematical set abstraction.</p>
<p>不包含重复元素的集合。最多只包含一个null元素。正如其名称所暗示的，该界面模拟数学集抽象</p>
</blockquote>
<h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><h3 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h3><h4 id="线程的状态"><a href="#线程的状态" class="headerlink" title="线程的状态"></a>线程的状态</h4><p><img src="G:%5Cresource%5Cpublic%5CYunBlog%5CNote%5Cpic%5C1567155756338.png" alt="1567155756338"></p>
<p>创建态(New)：线程被创建</p>
<p>就绪态(Runnable)：线程对象被start</p>
<p>运行态(Running)：线程获取到cpu权限进行执行</p>
<p>等待态(Blocked)：等待/阻塞/睡眠状态，线程让出cpu使用权限，暂时停止运行</p>
<p>结束态(Dead)：执行结束或异常退出run方法</p>
<blockquote>
<p>注意：start()和run()的区别</p>
<p>run()方法是任务，定义了线程需要做的工作，如果直接调用，则会在当前线程执行任务</p>
<p>start()会调用虚拟机的方法，再开一个线程异步执行run方法</p>
</blockquote>
<h4 id="线程的创建"><a href="#线程的创建" class="headerlink" title="线程的创建"></a>线程的创建</h4><blockquote>
<p>线程可以驱动任务，Runnable接口用来定义任务</p>
</blockquote>
<ol>
<li>继承Thread类并重写run方法，Thread类实现了Runnable接口</li>
<li>实现Runnable接口并重写run方法，要将Runnable任务赋给Thread构造器</li>
<li>实现Callable接口</li>
<li>创建ExecutorService对象，将任务交给该对象去execute</li>
</ol>
<h3 id="线程同步"><a href="#线程同步" class="headerlink" title="线程同步"></a>线程同步</h3><h4 id="Synchronized"><a href="#Synchronized" class="headerlink" title="Synchronized"></a><code>Synchronized</code></h4><p>包含wait和notify</p>
<h4 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a><code>volatile</code></h4><h4 id="Lock"><a href="#Lock" class="headerlink" title="Lock"></a><code>Lock</code></h4><h4 id="ThreadLocal"><a href="#ThreadLocal" class="headerlink" title="ThreadLocal"></a><code>ThreadLocal</code></h4><p>–&gt; <code>JDK1.2</code>包<code>java.lang.ThreadLocal</code></p>
<blockquote>
<p>姓名：本地线程副本变量工具类</p>
<p>用途：将私有线程和该线程存放的副本对象做一个映射，各个线程之间的变量互不干扰</p>
<p>场景：在高并发的场景下，可以实现无状态的调用，特别适用于各个线程依赖不同的变量值完成操作的场景</p>
</blockquote>
<h5 id="ThreadLocalMap"><a href="#ThreadLocalMap" class="headerlink" title="ThreadLocalMap"></a><code>ThreadLocalMap</code></h5><blockquote>
<p>ThreadLocalMap is a customized hash map suitable only for maintaining thread local values. No operations are exported outside of the ThreadLocal class. The class is package private to allow declaration of fields in class Thread.  To help deal with very large and long-lived usages, the hash table entries use WeakReferences for keys. However, since reference queues are not used, stale entries are guaranteed to be removed only when the table starts running out of space.</p>
<p>ThreadLocalMap是一个自定义hash map仅适用于维护本地线程值。不会在ThreadLocal类之外导出操作。这个类是私有允许在Thread类中声明字段。为帮助解决非常大且长期使用，hash table的entries使用弱引用键。但是，由于未使用引用队列，只有在表开始空间不足时才能保证删除过时entries</p>
</blockquote>
<h4 id="BlockingQueue"><a href="#BlockingQueue" class="headerlink" title="BlockingQueue"></a><code>BlockingQueue</code></h4><h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><h3 id="异常分类"><a href="#异常分类" class="headerlink" title="异常分类"></a>异常分类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">           Throwable</span><br><span class="line"></span><br><span class="line">          /          \</span><br><span class="line"></span><br><span class="line">      Error          Exception</span><br><span class="line"></span><br><span class="line">     /            /           \</span><br><span class="line"></span><br><span class="line">xxxxxx        xxxxxx         RuntimeException</span><br><span class="line"></span><br><span class="line">                            /               \</span><br><span class="line"></span><br><span class="line">                      xxxxxx       ArithmeticException</span><br></pre></td></tr></table></figure>

<p><code>Throwable</code>：代表可抛出</p>
<p><code>Error</code>：严重错误，无法处理</p>
<p><code>Exception</code>：异常</p>
<p><code>RuntimeException</code>：运行时异常</p>
<p><code>非RuntimeException</code>：非运行时异常</p>
<p><code>ArithmeticException</code>：算术异常</p>
<h3 id="处理方法"><a href="#处理方法" class="headerlink" title="处理方法"></a>处理方法</h3><h4 id="1-try-catch"><a href="#1-try-catch" class="headerlink" title="1. try-catch"></a>1. try-catch</h4><p>try-catch会捕获到异常，并在catch中处理，不会终止程序</p>
<p><code>getMessage()</code>：Exception类的方法之一，返回异常的原因</p>
<p><code>printStackTrace()</code>：Exception类的方法之一，在屏幕输出函数栈信息，也就是异常出现的地方</p>
<h4 id="2-throw-or-throws"><a href="#2-throw-or-throws" class="headerlink" title="2. throw or throws"></a>2. throw or throws</h4><p>把可能出现的异常给调用的上级函数处理，</p>
<p><code>throw</code>：用于代码块中，如果throw抛出一个非<code>RuntimeException</code>异常，必须在函数定义声明里加上throws后缀，并且上层函数必须对此异常做出处理</p>
<p><code>throws</code>：用于函数名中,如果加多个异常，则是有可能抛出多个异常的一种</p>
<p>如果都不进行处理，会将异常抛给<code>jvm</code>进行处理，<code>jvm</code>会中断整个程序，将异常信息输出到屏幕，非<code>RuntimeException</code>无法抛给<code>jvm</code>进行处理</p>
<h2 id="WebApp"><a href="#WebApp" class="headerlink" title="WebApp"></a>WebApp</h2><h3 id="jar包"><a href="#jar包" class="headerlink" title="jar包"></a>jar包</h3><p>java archive：java归档文件，是与平台无关的文件格式，它允许将许多文件合成一个压缩文件，javase程序可以打包成jar包</p>
<h3 id="War包"><a href="#War包" class="headerlink" title="War包"></a>War包</h3><p>可以直接运行的web模块，通常用于网站，打成包部署到容器中，</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/24/JavaEE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="PPCoder">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/author.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/24/JavaEE/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-24T22:44:20+08:00">
                2019-09-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Servlet是线程安全吗"><a href="#Servlet是线程安全吗" class="headerlink" title="Servlet是线程安全吗"></a>Servlet是线程安全吗</h3><h4 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h4><p>Servlet默认是单例模式的，在web容器中只创建一个实例，所以多个线程同时操作的时候，是不安全的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/24/Linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="PPCoder">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/author.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/24/Linux/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-24T22:44:20+08:00">
                2019-09-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><h5 id="用户空间-内核空间"><a href="#用户空间-内核空间" class="headerlink" title="用户空间/内核空间"></a>用户空间/内核空间</h5><blockquote>
<p>现在操作系统都是采用虚拟存储器，那么对32位操作系统而言，它的寻址空间（虚拟存储空间）为4G（2的32次方）。<br>操作系统的核心是内核，独立于普通的应用程序，可以访问受保护的内存空间，也有访问底层硬件设备的所有权限。为了保证用户进程不能直接操作内核（kernel），保证内核的安全，操作系统将虚拟空间划分为两部分，一部分为内核空间，一部分为用户空间。</p>
</blockquote>
<h5 id="进程切换"><a href="#进程切换" class="headerlink" title="进程切换"></a>进程切换</h5><blockquote>
<p>为了控制进程的执行，内核必须有能力挂起正在CPU上运行的进程，并恢复以前挂起的某个进程的执行。这种行为被称为进程切换。因此可以说，任何进程都是在操作系统内核的支持下运行的，是与内核紧密相关的，并且进程切换是非常耗费资源的</p>
</blockquote>
<h5 id="进程阻塞"><a href="#进程阻塞" class="headerlink" title="进程阻塞"></a>进程阻塞</h5><blockquote>
<p>正在执行的进程，由于期待的某些事件未发生，如请求系统资源失败、等待某种操作的完成、新数据尚未到达或无新工作做等，则由系统自动执行阻塞原语(Block)，使自己由运行状态变为阻塞状态。可见，进程的阻塞是进程自身的一种主动行为，也因此只有处于运行态的进程（获得了CPU资源），才可能将其转为阻塞状态。当进程进入阻塞状态，是不占用CPU资源的。</p>
</blockquote>
<h5 id="文件描述符"><a href="#文件描述符" class="headerlink" title="文件描述符"></a>文件描述符</h5><blockquote>
<p>内核为了高效管理已被打开的文件所创建的索引，用于指向被打开的文件，所有执行IO操作的系统调用都通过文件描述符，文件描述符是一个简单的非负整数，用以表明每个被进程打开的文件。</p>
<p>程序刚刚启动时，第一个打开的文件是0，第二个是1，也可理解为文件的身份id</p>
</blockquote>
<h5 id="缓存IO"><a href="#缓存IO" class="headerlink" title="缓存IO"></a>缓存IO</h5><blockquote>
<p>缓存I/O又称为标准I/O，大多数文件系统的默认I/O操作都是缓存I/O。在Linux的缓存I/O机制中，操作系统会将I/O的数据缓存在文件系统的页缓存中，即数据会先被拷贝到操作系统内核的缓冲区中，然后才会从操作系统内核的缓冲区拷贝到应用程序的地址空间。</p>
</blockquote>
<h3 id="系统文件"><a href="#系统文件" class="headerlink" title="系统文件"></a>系统文件</h3><table>
<thead>
<tr>
<th>目录</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>/</td>
<td>根目录</td>
</tr>
<tr>
<td>/boot</td>
<td>引导程序，存放内核</td>
</tr>
<tr>
<td>/sbin</td>
<td>超级用户的命令集</td>
</tr>
<tr>
<td>/bin</td>
<td>普通用户的命令集</td>
</tr>
<tr>
<td>/lib</td>
<td>系统引导和命令集的共享库</td>
</tr>
<tr>
<td>/dev</td>
<td>设备文件目录</td>
</tr>
<tr>
<td>/home</td>
<td>普通用户home目录</td>
</tr>
<tr>
<td>/root</td>
<td>root用户home目录</td>
</tr>
<tr>
<td>/etc</td>
<td>全局配置文件</td>
</tr>
<tr>
<td>/usr</td>
<td>命令库文件和通常操作不会修改的文件</td>
</tr>
<tr>
<td>/proc</td>
<td>特殊文件目录</td>
</tr>
<tr>
<td>/opt</td>
<td>可选择的文件目录</td>
</tr>
<tr>
<td>/mnt</td>
<td>临时挂载目录</td>
</tr>
<tr>
<td>/media</td>
<td>挂载的媒体设备目录</td>
</tr>
<tr>
<td>/var</td>
<td>内容经常变化的目录</td>
</tr>
<tr>
<td>/tmp</td>
<td>临时文件目录(文件可能会被系统自动清空)</td>
</tr>
<tr>
<td>/lost+found</td>
<td>恢复文件存放的位置</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>目录</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>/usr/lib</td>
<td>目标库文件，动态连接库＋不直接调用的可执行文件</td>
</tr>
<tr>
<td>/usr/bin</td>
<td>使用者使用，不是系统自检所必须可执行文件</td>
</tr>
<tr>
<td>/usr/sbin</td>
<td>管理员使用的非系统必须的可执行文件存放目录</td>
</tr>
<tr>
<td>/usr/share</td>
<td>存放共享文件的目录</td>
</tr>
<tr>
<td>/usr/include</td>
<td>linux下开发和编译所需要的头文件</td>
</tr>
<tr>
<td>/usr/local</td>
<td>安装本地程序一般的默认路径</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>目录</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>/etc/rc</td>
<td>启动，或改变运行级时运行的脚本或脚本的目录</td>
</tr>
<tr>
<td>/etc/passwd</td>
<td>用户数据库，其中的域给出了用户名，真实姓名</td>
</tr>
<tr>
<td></td>
<td>用户起始目录，加密口令和用户的其他信息</td>
</tr>
<tr>
<td>/etc/fdprm</td>
<td>软盘参数表</td>
</tr>
<tr>
<td>/etc/fstab</td>
<td>指定启动时需要自动安装的文件系统列表</td>
</tr>
<tr>
<td>/etc/group</td>
<td>组信息</td>
</tr>
<tr>
<td>/etc/inittab</td>
<td>init的配置文件</td>
</tr>
<tr>
<td>/etc/issue</td>
<td>包括用户在登录提示符前的输出信息</td>
</tr>
<tr>
<td></td>
<td>通常包括系统的一段短说明或欢迎信息，具体内容由系统管理员确定</td>
</tr>
<tr>
<td>/etc/magic</td>
<td>“file”的配置文件</td>
</tr>
<tr>
<td>/etc/motd</td>
<td>message of the day,用户成功登陆后自动输出</td>
</tr>
<tr>
<td>/etc/mtab</td>
<td>当前安装的文件系统列表</td>
</tr>
<tr>
<td>/etc/shadow</td>
<td></td>
</tr>
<tr>
<td>/etc/login.defs</td>
<td>login命令的配置文件</td>
</tr>
<tr>
<td>/etc/printcap</td>
<td>类似/etc/termcap，针对打印机</td>
</tr>
<tr>
<td>/etc/termcap</td>
<td>终端性能数据库。说明不同的终端用什么“转义序列”控制</td>
</tr>
<tr>
<td></td>
<td>写程序时不直接输入转义序列，而是从中查找要做的工作的正确序列</td>
</tr>
<tr>
<td>/etc/profile</td>
<td>登录或启动bourne或c shells执行的文件</td>
</tr>
<tr>
<td>/etc/csh.login</td>
<td>同上</td>
</tr>
<tr>
<td>/etc/csh.cshrc</td>
<td>同上，这允许系统管理员为所有用户建立全局缺省环境</td>
</tr>
<tr>
<td>/etc/securetty</td>
<td>确认安全终端，即哪个终端允许超级用户登录</td>
</tr>
<tr>
<td></td>
<td>一般只列出虚拟控制台，这样就不可能通过调制解调器或网络闯入系统并得到超级用户特权</td>
</tr>
<tr>
<td>/etc/shells</td>
<td>列出可以使用的shell</td>
</tr>
<tr>
<td></td>
<td>chsh命令允许用户在本文件指定范围内改变登录的shell。</td>
</tr>
<tr>
<td></td>
<td>提供一台机器ftp服务的服务进程ftpd检查用户shell是否在/etc/shells文件中，如果不是，将不允许该用户登录</td>
</tr>
</tbody></table>
<h3 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h3><h4 id="守护进程"><a href="#守护进程" class="headerlink" title="守护进程"></a>守护进程</h4><blockquote>
<p>Daemon()程序是一直运行的服务端程序，又称为守护进程。通常在系统后台运行，没有控制终端，不与前台交互，Daemon程序一般作为系统服务使用。Daemon是长时间运行的进程，通常在系统启动后就运行，在系统关闭时才结束。一般说Daemon程序在后台运行，是因为它没有控制终端，无法和前台的用户交互。Daemon程序一般都作为服务程序使用，等待客户端程序与它通信。我们也把运行的Daemon程序称作守护进程。</p>
</blockquote>
<h3 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h3><h4 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h4><h5 id="阻塞"><a href="#阻塞" class="headerlink" title="阻塞"></a>阻塞</h5><p>一直等待数据就绪再返回</p>
<h5 id="非阻塞"><a href="#非阻塞" class="headerlink" title="非阻塞"></a>非阻塞</h5><p>无论什么情况都会立即返回</p>
<h5 id="同步"><a href="#同步" class="headerlink" title="同步"></a>同步</h5><p>一直阻塞进程，直到IO操作结束</p>
<h5 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h5><p>不会阻塞调用者进程</p>
<h4 id="IO过程"><a href="#IO过程" class="headerlink" title="IO过程"></a>IO过程</h4><ul>
<li>等待数据准备</li>
<li>将数据从内核拷贝到用户进程中</li>
</ul>
<h4 id="IO模型"><a href="#IO模型" class="headerlink" title="IO模型"></a>IO模型</h4><ul>
<li>Blocking IO - 阻塞IO</li>
<li>NoneBlocking IO - 非阻塞IO</li>
<li>IO multiplexing - IO多路复用</li>
<li>signal driven IO - 信号驱动IO</li>
<li>asynchronous IO - 异步IO</li>
</ul>
<h5 id="阻塞IO"><a href="#阻塞IO" class="headerlink" title="阻塞IO"></a>阻塞IO</h5><p>IO执行的两个过程都被block</p>
<h5 id="非阻塞IO"><a href="#非阻塞IO" class="headerlink" title="非阻塞IO"></a>非阻塞IO</h5><ul>
<li><p>用户进程不断询问kernel数据准备好没有</p>
</li>
<li><p>用户进程没有阻塞，内核被阻塞</p>
</li>
</ul>
<h5 id="IO多路复用"><a href="#IO多路复用" class="headerlink" title="IO多路复用"></a>IO多路复用</h5><p>优点：系统开销小，系统不必创建(维护)进程/线程，减小了系统开销</p>
<p>==select==：轮询</p>
<ul>
<li>处理多个连接：监听多个socket连接，任意一个数据就绪了就返回进行拷贝工作</li>
<li>select底层通过轮询机制来判断socket读写是否就绪，会增加开销，支持的文件描述符数量过少</li>
<li>每个socket都是non-blocking，</li>
</ul>
<p>poll：</p>
<p>==epoll==：事件回调</p>
<blockquote>
<p>在内核中当文件描述符被激活时都会调用一个回调函数，epoll根据回调函数直接定位文件描述符，极大提高了效率，同时也减轻了CPU的负担，不用一遍遍轮询</p>
</blockquote>
<h5 id="异步IO"><a href="#异步IO" class="headerlink" title="异步IO"></a>异步IO</h5><p>读取操作通知内核进行读取并将数据拷贝至进程中</p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/22/运维开发文档/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="PPCoder">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/author.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/22/运维开发文档/" itemprop="url">ssh安全中的一些要点</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-22T22:54:27+08:00">
                2019-09-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="SSH远程登录"><a href="#SSH远程登录" class="headerlink" title="SSH远程登录"></a>SSH远程登录</h2><p>ssh -p 22 <a href="mailto:root@111.111.111.111" target="_blank" rel="noopener">root@111.111.111.111</a></p>
<h2 id="服务器安全"><a href="#服务器安全" class="headerlink" title="服务器安全"></a>服务器安全</h2><p>白名单：/etc/hosts.allow</p>
<p>黑名单：/etc/hosts.deny</p>
<p>sshd:xxx.xxx.xxx.xxx:deny</p>
<p>多次登录失败加入黑名单脚本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#脚本来源：https://www.cnblogs.com/panblack/p/secure_ssh_auto_block.html</span><br><span class="line"></span><br><span class="line">#脚本地址：/usr/local/bin/secure_ssh.sh</span><br><span class="line">#! /bin/bash</span><br><span class="line">cat /var/log/secure|awk &apos;/Failed/&#123;print $(NF-3)&#125;&apos;|sort|uniq -c|awk &apos;&#123;print $2&quot;=&quot;$1;&#125;&apos; &gt; /usr/local/bin/black.list</span><br><span class="line">for i in `cat  /usr/local/bin/black.list`</span><br><span class="line">do</span><br><span class="line">  IP=`echo $i |awk -F= &apos;&#123;print $1&#125;&apos;`</span><br><span class="line">  NUM=`echo $i|awk -F= &apos;&#123;print $2&#125;&apos;`</span><br><span class="line">  if [ $&#123;#NUM&#125; -gt 1 ]; then</span><br><span class="line">    grep $IP /etc/hosts.deny &gt; /dev/null</span><br><span class="line">    if [ $? -gt 0 ];then</span><br><span class="line">      echo &quot;sshd:$IP:deny&quot; &gt;&gt; /etc/hosts.deny</span><br><span class="line">    fi</span><br><span class="line">  fi</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">#定时执行</span><br><span class="line"># crontab -e</span><br><span class="line">*/1 * * * *  sh /usr/local/bin/secure_ssh.sh</span><br></pre></td></tr></table></figure>

<h4 id="sshd-config-配置"><a href="#sshd-config-配置" class="headerlink" title="sshd_config 配置"></a>sshd_config 配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#####ssh server整体设定#####</span><br><span class="line">#端口</span><br><span class="line">Port 1007</span><br><span class="line">#安全协议</span><br><span class="line">#protocol 1存在漏洞，使用时建议改为2，客户端openssh7.4以上不再支持v1</span><br><span class="line">Protocol 1,2</span><br><span class="line"></span><br><span class="line">#####安全认证#####</span><br><span class="line">#用户登录失败，在切断连接前服务器需要等待的时间</span><br><span class="line">LoginGraceTime 2m</span><br><span class="line"></span><br><span class="line">#####登录后设置#####</span><br><span class="line">#打印上一次登录信息</span><br><span class="line">PrintLastLog yes</span><br><span class="line">#最大失败次数</span><br><span class="line">#当失败次数太多时，修改白名单即可</span><br><span class="line">MaxAuthTries 2</span><br><span class="line">#ssh最大连接个数</span><br><span class="line">MAxStartups 5</span><br></pre></td></tr></table></figure>

<p>service sshd reload –&gt; 生效</p>
<h2 id="防火墙firewall"><a href="#防火墙firewall" class="headerlink" title="防火墙firewall"></a>防火墙firewall</h2><p>启动：systemctl start firewall或systemctl start firewalld.service</p>
<p>开机自启：systemctl enable firewall</p>
<p>添加端口：firewall-cmd –zone=public –add-port=443/tcp –permanent</p>
<p>查看端口：firewall-cmd –permanent –list-port</p>
<p>修改配置文件后重新加载配置：firewall-cmd –reload</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/10/分支预测/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="PPCoder">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/author.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/10/分支预测/" itemprop="url">CPU对循环语句的优化方案-分支预测</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-10T23:10:17+08:00">
                2019-09-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="分支预测"><a href="#分支预测" class="headerlink" title="分支预测"></a>分支预测</h3><p>定义： 所谓分支预测，即在CPU的运行会预测向哪个分支前进</p>
<p>原因： 因为现代处理器有很长的流水线，启动和制动都需要很长的时间，如果通过预测行走路线，则会节省很多时间</p>
<blockquote>
<p> CPU在遭遇分支时，CPU的分支预测器根据历史模式预测可能性最高的分支，</p>
<ul>
<li><p>然后依靠指令流水线实现一边计算分支中的判断条件</p>
</li>
<li><p>一边已经进入最有可能的分支开始了接下来的“投机性计算”</p>
</li>
</ul>
<p>如果最后预测错误，那么投机性计算结果将被抛弃，重新进入正确的分支进行计算。在现代处理器中，流水线级数很长，一次分支预测失败可能损失20个左右的时钟周期。</p>
</blockquote>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p>[掘金社区] <a href="https://juejin.im/post/5d380d26e51d45777811746f" target="_blank" rel="noopener">https://juejin.im/post/5d380d26e51d45777811746f</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/06/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="PPCoder">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/author.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/06/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-06T19:46:41+08:00">
                2019-09-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Welcome"><a href="#Welcome" class="headerlink" title="Welcome!"></a>Welcome!</h3><p>The website is stored some my markdown, and sometimes i might refer other’s words directly. so i need transfer my note to original works.</p>
<p>Then again, if there is infring, please contact me wo delete.</p>
<p>Email: <a href="mailto:dml_pig@163.com" target="_blank" rel="noopener">dml_pig@163.com</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/17/JVM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="PPCoder">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/author.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yun">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/17/JVM/" itemprop="url">JVM读书笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-17T19:38:10+08:00">
                2019-07-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h1><hr>
<p><img src="C:%5CUsers%5CHP%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1560514540657.png" alt="1560514540657"></p>
<h2 id="java运行时数据区"><a href="#java运行时数据区" class="headerlink" title="java运行时数据区"></a>java运行时数据区</h2><p>java虚拟机在执行java程序的过程中会把它所管理的内存划分为若干个不同的数据区域。</p>
<p>方法区</p>
<p>堆</p>
<p>运行时常量池</p>
<p>程序计数器：native method is undefined</p>
<p>本地方法栈：native</p>
<p>虚拟机栈：thread–&gt;VM stack, method–&gt;frame</p>
<hr>
<h2 id="java内存模型"><a href="#java内存模型" class="headerlink" title="java内存模型"></a>java内存模型</h2><p>主要目标是定义程序中各个变量的访问规则，即在虚拟机中将变量存储到内存和从内存中去除变量这样的底层细节。</p>
<p>方法区：（非堆，non-heap，metaspace（1.8元数据区），perm space（1.7永久代））</p>
<p>堆：Old老年代，Young新生代（eden[8]，survivor[2]（from[1]，to[1]））</p>
<p>java vm 视图监视器：jvisualvm</p>
<p>gc{</p>
<p>}</p>
<p>垃圾收集器：（好坏评判标准：吞吐量和停顿时间）</p>
<ul>
<li>Serial 单线程收集器，收集时暂停其他线程</li>
<li>Serial Old ↑ 标记-整理</li>
<li>ParNew 多线程gc 收集时暂停其他线程</li>
<li>Parallel Scanvenge 多线程并行gc 保证<strong>吞吐量优先</strong></li>
<li>Parallel Old↑</li>
<li>CMS：concurrent Mark Sweep 更加关注回收<strong>停顿时间</strong> 标记-清除 初始标记–并发标记–重新标记–并发清理</li>
<li>G1 分代收集（存在于新生代和老年代）空间整理（标记-整理） 停顿时间可设定</li>
</ul>
<p>1.关于java虚拟机栈</p>
<p>thread–&gt;VM stack, method–&gt;frame</p>
<p>由此可见，一个线程对应着一个虚拟机栈，一个方法对应着一个栈帧，由于栈是后进先出，正对应方法的调用规则，后调用的先返回。方法内部的局部变量等则自然保存在每个栈帧中。</p>
<p>关于pc寄存器</p>
<p>pc寄存器是java调试等程序中断操作，代码指令运行的行数，恢复时去这里查找。重要的一点就是，native方法是undefined</p>
<p>2.运行时数据区是java程序执行过程中各种变量方法存储的逻辑区域，便于管理。</p>
<p>内存结构模型则是实现这些逻辑区域的底层实现</p>
<p>3.内存模型的划分</p>
<p>方法区：（非堆，non-heap，metaspace（1.8元数据区），perm space（1.7永久代））</p>
<p>堆：Old老年代，Young新生代（eden[8]，survivor[2]（from[1]，to[1]））</p>
<p>4.确定对象为垃圾的算法：引用-标记，可达性分析</p>
<p>5.常用的垃圾回收算法：标记-清除，标记-复制，标记-整理</p>
<p>6.垃圾收集器：（<strong>好坏评判标准：吞吐量和停顿时间</strong>）</p>
<ul>
<li>Serial 复制 单线程收集器，收集时暂停其他线程</li>
<li>Serial Old ↑ 标记-整理</li>
<li>ParNew 复制 多线程gc 收集时暂停其他线程</li>
<li>Parallel Scanvenge 复制 多线程并行gc 保证<strong>吞吐量优先</strong></li>
<li>Parallel Old↑ 标记-整理</li>
<li>CMS：（concurrent Mark Sweep）标记-清除  更加关注回收<strong>停顿时间</strong></li>
<li>G1 分代收集（存在于新生代和老年代）空间整理（标记-整理） 停顿时间可设定</li>
</ul>
<p>7.吞吐量：当前时刻下，产生一定量的运算或者操作，也就是速率。收集器中就是说在大量的操作，很短的时间内将垃圾收集完成。</p>
<p>停顿时间：当前作业操作被其他操作打断，到恢复前的一段时间就是停顿时间。即进行回收操作时，占用了其他操作的时间，对于其他操作来说，即产生了停顿时间</p>
<h2 id="对象已死吗？可达性分析"><a href="#对象已死吗？可达性分析" class="headerlink" title="对象已死吗？可达性分析"></a>对象已死吗？可达性分析</h2><p><strong>三种类型的引用定义了三种不同层次的可达性级别，由强到弱排列如下：</strong></p>
<p>　　<strong>SoftReference &gt;</strong> <strong>WeakReference &gt; PhantomReference</strong></p>
<p>　　越弱表示对垃圾回收器的限制越少，对象越容易被回收。</p>
<h3 id="SoftReference"><a href="#SoftReference" class="headerlink" title="SoftReference"></a>SoftReference</h3><p>　　<strong>SoftReference</strong>用来实现一些内存敏感的缓存(Soft references are for implementing memory-sensitive caches)，只要内存空间足够，对象就会保持不被回收。</p>
<p>　　反之，当宿主进程的内存空间不足时，对象就会被GC回收。</p>
<p>　　所以SoftReference意味着：<strong>hold on until you can’t.</strong></p>
<h3 id="WeakReference"><a href="#WeakReference" class="headerlink" title="WeakReference"></a>WeakReference</h3><p>　　<strong>W**</strong>eakReference<strong>可以用来实现一些规范化映射（</strong>WeakHashMap**），其中key或者value当它们不再被引用时可以自动被回收。</p>
<p>　　当你想引用一个对象，但是这个对象有自己的生命周期，你不想介入这个对象的生命周期，这时候你就是用弱引用。</p>
<p>　　这个引用不会在对象的垃圾回收判断中产生任何附加的影响。</p>
<h3 id="PlantomReference"><a href="#PlantomReference" class="headerlink" title="PlantomReference"></a>PlantomReference</h3><p>　　<strong>PlantomReference</strong>和WeakReference一样，也不会介入引用对象的生命周期。</p>
<p>　　PhantomReference用来调度一些预验清理动作，提供比Java清理机制更灵活的处理方式。（Phantom references are for scheduling pre-mortem cleanup actions in a more flexible way than is possible with the Java finalization mechanism.）</p>
<p>　　PlantomReference比较特殊，它的get方法总是返回null，所以你得不到它引用的对象。</p>
<p>　　它保存<strong>ReferenceQueue</strong>中的轨迹。</p>
<p>　　它允许你知道对象何时从内存中移除。</p>
<h2 id="虚拟机指令"><a href="#虚拟机指令" class="headerlink" title="虚拟机指令"></a>虚拟机指令</h2><h4 id="修改gc收集器"><a href="#修改gc收集器" class="headerlink" title="修改gc收集器"></a>修改gc收集器</h4><p>tomcat的catalina.sh配置文件 JAVA_OPTS</p>
<p>jinfo -flags 参数 pid//实时修改</p>
<p>Java -XX：参数 -jar xxx.jar //启动时设置</p>
<h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><p>jps -l //查看java进程</p>
<p>jstat -class pid 1000（时间） 10（次数）//查看类的信息</p>
<p>jstat -gc </p>
<p>jstack pid</p>
<p>jmap -heap pid</p>
<p>jmap </p>
<p>HeapDumpOnOutOfMemoryError //堆内存溢出时dump</p>
<h4 id="垃圾回收"><a href="#垃圾回收" class="headerlink" title="垃圾回收"></a>垃圾回收</h4><p>-XX：+UsePrintGCDetails</p>
<p>-XX：+UsePrintGCTimeStamps</p>
<h3 id="类的加载"><a href="#类的加载" class="headerlink" title="类的加载"></a>类的加载</h3><ul>
<li>创建类的实例</li>
<li>拿到类的静态变量</li>
<li>调用类的静态方法</li>
<li>初始化子类</li>
</ul>
<h4 id="gc分析工具"><a href="#gc分析工具" class="headerlink" title="gc分析工具"></a>gc分析工具</h4><p>gceasy.io(在线)</p>
<p>gcviewer(本地)</p>
<p>1.JVM常用参数：</p>
<p>-XX:+UseParallelGC</p>
<p>-XX:+UseParNewGC</p>
<p>-Xms</p>
<p>-Xmx</p>
<p>-Xmn</p>
<p>-XX:+UsePrintGCDetails</p>
<p>-XX:+UsePrintGCTimeStamps</p>
<p>2.JVM常用的命令和工具</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">jps -l //查看java进程</span><br><span class="line"></span><br><span class="line">jstat -class pid 1000（时间） 10（次数）//查看类的信息</span><br><span class="line"></span><br><span class="line">jstat -gc pid &lt;interval&gt;  &lt;count&gt; //打印gc信息</span><br><span class="line"></span><br><span class="line">jstack pid //查看线程调用堆栈</span><br><span class="line"></span><br><span class="line">jmap -heap pid //打印java进程堆信息</span><br><span class="line"></span><br><span class="line">jmap -dump:file=xxx pid //dump堆到文件</span><br><span class="line"></span><br><span class="line">HeapDumpOnOutOfMemoryError //堆内存溢出时dump</span><br></pre></td></tr></table></figure>

<p>jps：虚拟机进程状况工具</p>
<p>jstat：虚拟机统计信息监视工具</p>
<p>jinfo：java配置信息工具</p>
<p>jmap：java内存映像工具</p>
<p>jhat：虚拟机堆转储快照分析工具</p>
<p>jstack：java堆栈跟踪工具</p>
<p>jconsole：java监视与管理控制台</p>
<p>visualVM：多合一故障处理工具</p>
<p>3.</p>
<p>方法区：类信息，常量，静态变量，即时编译后的代码</p>
<p>堆：对象和数据实例</p>
<p>运行时常量池：常量</p>
<p>程序计数器：字节码的行号</p>
<p>本地方法栈：native方法</p>
<p>虚拟机栈：局部变量表，操作数栈，动态链接，出口</p>
<p>4.</p>
<p>堆： <code>-Xmx20m -Xms5m -XX:+HeapDumpOnOutOfMemoryError while(1){new Object();}</code></p>
<p>方法区：<code>-XX:PermSize20M  -XX:MaxPermSize40M while(1){CglibVean bean=new CglibBean();}</code></p>
<p>5.</p>
<p>递归循环调用：StackOverflow</p>
<p>查看死锁：jstack -l pid</p>
<p>6.</p>
<p>.<br>├─类加载器<br>├──装载<br>|   ├── 找到class文件并转换为流的形式<br>|   ├── 存储到各个区域<br>|   └── 创建Class对象<br>├──链接<br>|   ├── 验证<br>|   ├── 准备<br>|   └── 解析<br>├── 初始化<br>├─垃圾收集器<br>├── 方法区<br>└── 堆</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/author.jpg" alt="PPCoder">
            
              <p class="site-author-name" itemprop="name">PPCoder</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">PPCoder</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
